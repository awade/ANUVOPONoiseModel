function [delta_a,delta_b] = cavityLengthNoise(Omega,L,lengthNoisemRtHz)

%A function for length noise based on Kirk's and Sheila's thesis. All
%contributions of length noise come out in the fluctuating component of
%delta_a and delta_b - still unsure if static component should be included

%will put in a variable length noise soon
% 
% Omega = logspace(0,10,1000);
% L = 0.345;
% lengthNoisemRtHz = 10^-10;

lengthNoise = zeros(1,numel(Omega));

[c,f100] = min(abs(Omega/2/pi-100)); %find nearest point to 100Hz for our crossover
%f100 = Omega(index);

lengthNoise(1:f100) = 10*lengthNoisemRtHz.*(Omega(1:f100)/2/pi).^(-1/2); %at 100Hz lengthNoise = 10^-15 m/sqrtHz
lengthNoise(f100+1:end) = lengthNoisemRtHz;

lengthNoiseRMS = rms(Omega',lengthNoise'); %use general spectral density/time series rms, from high to low frequency

delta_b = zeros(2,numel(Omega));
delta_a = zeros(2,numel(Omega));

delta_b(1,:) = 0; %cavity locked on fundamental, but is this different? Sheila suggests it is
delta_b(2,:) = Omega.*lengthNoiseRMS/L; %fluctuating component of detuning
delta_a(1,:) = 0;
delta_a(2,:) = Omega.*lengthNoiseRMS/L/2;
% 
% figure
% loglog(Omega/2/pi,lengthNoise)